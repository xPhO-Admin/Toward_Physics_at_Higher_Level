 \centering
         \scalebox{1}{  
         \begin{circuitikz}[european]
         { \sffamily <
         [american,font=\small]
\draw 

(0,-0.7727) node[op amp] (opamp) {}
(opamp.+) to [short] ++ (-0.0025,0) to ++(0,-1.75) node[ground]{}
(opamp.-) to ++(-1.316,0)  %Phần dây cực âm kéo dài%
(opamp.out) to [short,-o] ++(0.62,0) node[right] {}
(1.75,-0.5) node[right]{$V_\text{out}$}{}
(opamp.-) to [short] (-1.19,1)  
(-1.19,1) to [R] (1.5,1)
(0.21,1.125) node[above]{$R_f$}
(1.5,1) to (1.5,-0.775)

(-1.19,-0.27) to [short, -o] (-1.19,-0.27) node[below]{$M$}

(-1.19, -0.2825) to (-3.5, -0.2825)
(-3.5, -0.2825) to (-3.5, -0.7825)
(-3.5, -0.7825) to [R, l_=$2R$] (-3.5, -2.2825)
(-3.5, -2.2825) to (-3.5,-2.5)
;
\draw[ultra thick]
(-3.5,-2.5) to (-3, -3)
(-5,-2.5) to (-4.5, -3) 
(-6.5, -2.5) to (-6.5, -3)
(-8,-2.5) to (-7.5, -3)
;
\draw
(-3.5, -3) to (-3.5, -4.25)
(-5, -3) to (-5, -4.25)
(-6.5, -3) to (-6.5, -4.25)
(-8, -3) to (-8, -4.2525)

(-3.5, -0.2825) to [R, l_=$R$] (-5, -0.2825)
(-5, -0.2825) to (-5, -0.7825)
(-5, -0.7825) to [R, l_=$2R$] (-5, -2.2825)
(-5, -2.2825) to (-5,-2.5)

(-5, -0.2825) to [R, l_=$R$] (-6.5, -0.2825)
(-6.5, -0.2825) to (-6.5, -0.7825)
(-6.5, -0.7825) to [R, l_=$2R$] (-6.5, -2.2825)
(-6.5, -2.2825) to (-6.5,-2.5)

(-6.5, -0.2825) to [R, l_=$R$] (-8, -0.2825) node[above]{}
(-8, -0.2825) to (-8, -0.7825)
(-8, -0.7825) to [R, l_=$2R$] (-8, -2.2825)
(-8, -2.2825) to (-8,-2.5)

(-7.5, -3)node[ground]{}
(-6, -3)node[ground]{}
(-4.5, -3)node[ground]{}
(-3, -3)node[ground]{}
(-7.5, -3) to [short, -o] (-7.5, -3)
(-6, -3) to [short, -o] (-6, -3)
(-4.5, -3) to [short, -o] (-4.5, -3)
(-3, -3) to [short, -o] (-3, -3)

(-7, -2.75)node[left]{$K_3$}
(-5.5, -2.75)node[left]{$K_2$}
(-4, -2.75)node[left]{$K_1$}
(-2.5, -2.75)node[left]{$K_0$}

(-6.75, -3.9)node[left]{$b_3=0$}
(-5.25, -3.9)node[left]{$b_2=1$}
(-3.75, -3.9)node[left]{$b_1=0$}
(-2.25, -3.9)node[left]{$b_0=0$}

(-3.5, -4.25) to (-9, -4.25)
(-9, -4.25) to [short, -o] (-9, -4.25) node[left]{$V_\text{in}$} {}

(-8, -0.2825) to (-9.5, -0.2825)
(-9.5, -0.2825) to (-9.5, -0.7825)
(-9.5, -0.7825) to [R, l_=$2R$] (-9.5,  -2.2825)
(-9.5,  -2.2825) to (-9.5,  -3)node[ground]{}

(-3.5, -3) to [short, -o] (-3.5, -3)
(-5, -3) to [short, -o] (-5, -3)
(-6.5, -3) to [short, -o] (-6.5, -3)
(-8, -3) to [short, -o] (-8, -3)

(-3.5,-2.5) to [short, -o] (-3.5,-2.5)
(-5,-2.5) to [short, -o] (-5,-2.5) 
(-6.5,-2.5) to [short, -o] (-6.5,-2.5) 
(-8,-2.5) to [short, -o] (-8,-2.5)
 ;
  \draw[dashed]
 (-2,1) to (-10.5,1)
 (-10.5,1) to (-10.5,-5)
 (-10.5,-5) to (-2,-5)
 (-2,-5) to (-2,1)
 ;
 >}
\end{circuitikz}}